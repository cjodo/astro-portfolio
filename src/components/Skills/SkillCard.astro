---
const { skill, showProficiency = false } = Astro.props
import type { Skill } from '../../data/skills'

interface Props {
  skill: Skill
  showProficiency?: boolean
}

const proficiencyColors = {
  beginner: 'bg-red-500',
  intermediate: 'bg-yellow-500',
  advanced: 'bg-blue-500',
  expert: 'bg-green-500'
} as const

const getProficiencyLabel = (prof?: Skill['proficiency']) => {
  if (!prof) return ''
  return prof.charAt(0).toUpperCase() + prof.slice(1)
}
---

<div
  class="
    relative w-24 h-24
    flex items-center justify-center
    rounded-lg cursor-pointer
    focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2

    transition-transform duration-300 ease-out
    transform-gpu will-change-transform
    contain-layout contain-paint
    group
  "
  role="button"
  tabindex="0"
  aria-label={`${skill.name} skill${skill.proficiency ? ` - ${getProficiencyLabel(skill.proficiency)} proficiency` : ''}`}
  data-skill={skill.name}
>
  <!-- Logo -->
  <img
    src={skill.logo}
    alt={skill.name}
    width="64"
    height="64"
    loading="eager"
    decoding="async"
    draggable="false"
    class="
      w-16 h-16 object-contain
      transition-transform duration-300 ease-out
      transform-gpu will-change-transform
      group-hover:scale-110
    "
  />

  <!-- Hover overlay -->
  <div
    class="
      absolute inset-0
      flex flex-col items-center justify-center
      rounded-lg

      bg-black/80 text-white
      text-xs font-semibold p-2

      opacity-0
      transition-opacity duration-300 ease-out
      pointer-events-none
      group-hover:opacity-100

      will-change-opacity
      isolate
    "
  >
    <span class="text-center leading-tight">
      {skill.name}
    </span>

    {showProficiency && skill.proficiency && (
      <span
        class={`
          mt-1 px-2 py-0.5 rounded-full text-xs
          ${proficiencyColors[skill.proficiency]}
        `}
      >
        {getProficiencyLabel(skill.proficiency)}
      </span>
    )}
  </div>
</div>

